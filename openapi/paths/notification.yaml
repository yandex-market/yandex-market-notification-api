post:
  tags:
    - notification
  operationId: sendNotification
  summary: Получение уведомлений
  description: >
    Маркет отправляет магазину уведомления о событиях:

      * создание нового заказа;
      * изменение статуса заказа;
      * создание заявки на отмену заказа;
      * отмена заказа;
      * создание нового невыкупа или возврата;
      * изменение статуса невыкупа или возврата.

    {% note info "Учитывайте эти особенности в работе с уведомлениями" %}


    * Маркет может отправлять несколько уведомлений по одному и тому же событию.

        В некоторых случаях это нормальное поведение. Например, может быть несколько уведомлений с изменением статуса заказа из-за поиска курьера.

    * Время в уведомлении, в ответе на запрос к Маркету и в вашей системе может
    отличаться.

        Это происходит из-за того, что в момент отправки уведомления состояние заказа уже может быть другим.

        В запросе `POST notification` время события приходит в `createdAt`, `updatedAt` или `cancelledAt`. Выбор параметра зависит от типа уведомления.


    Актуальным считайте более позднее время события. Оно может быть в
    уведомлении, вернуться в ответе на запрос к Маркету или храниться в вашей
    системе.


    {% endnote %}


    Таймаут на получение ответа: 10 секунд.
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: ../components/schemas/SendNotificationRequest.yaml
    description: Тело запроса с уведомлением.
  responses:
    '200':
      description: Ответ на корректный запрос с информацией об обработке уведомления.
      content:
        application/json:
          schema:
            $ref: ../components/schemas/SendNotificationResponse.yaml
    '400':
      description: >-
        Если Маркет прислал некорректное уведомление, верните статус `400` с
        описанием ошибки.
      content:
        application/json:
          schema:
            $ref: ../components/schemas/SendNotificationErrorResponse.yaml
    '500':
      description: >-
        Если произошла техническая ошибка на вашей стороне, верните статус
        `500`. [{#T}](../../push-notifications/index.md#no-answer)
      content:
        application/json:
          schema:
            $ref: ../components/schemas/SendNotificationErrorResponse.yaml
